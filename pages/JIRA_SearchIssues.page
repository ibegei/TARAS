<apex:page controller="JIRA_SearchIssues" standardStylesheets="false" sidebar="true" applyHtmlTag="true" applyBodyTag="false" docType="html-5.0" showHeader="true" tabStyle="Flosum__Branch__c">
    
    <html >
        <head>
            <meta charset="utf-8" />
            <meta http-equiv="x-ua-compatible" content="ie=edge" />
            
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            
            <apex:slds />
            
            
            
        </head>
        <body>
            
            <div class="slds-scope">
                <c:SLDS_Spinner />
                <apex:form >
                    
                    <apex:outputPanel id="main">
                        <apex:pageMessages ></apex:pageMessages>
                        <article class="slds-card">
                            <div class="slds-card__header slds-grid">
                                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                    
                                    <div class="slds-media__body">
                                        <h2 class="slds-card__header-title">
                                            
                                            <span>Search JIRA Issue</span>
                                            
                                        </h2>
                                    </div>
                                    <div class="slds-no-flex">
                                          <apex:commandButton action="{!searchJiraIssues}" styleClass="slds-button slds-button_brand" title="Search" value="Search" reRender="main" status="renderLightningSpinner"/>
                                          <apex:commandButton value="Return" reRender="main" styleClass="slds-button slds-button_neutral" action="{!cancel}"/> 
                                      
                                        
                                    </div>
                                </header>
                            </div>
                            <div class="slds-card__body slds-card__body_inner">
                                <apex:input value="{!searchKey}" styleClass="slds-input" required="true"></apex:input>
                                <fieldset class="slds-form-element">
                                    <legend class="slds-form-element__legend slds-form-element__label">Jira Projects</legend>
                                    <div class="slds-form-element__control" id="chk_options">
                                        <apex:repeat value="{!chkOptions}" var="opt">
                                            <span class="slds-checkbox">
                                                <label class="slds-checkbox">
                                                    <apex:inputcheckbox value="{!opt.isSelected}"  styleclass="slds-input"/>
                                                    <span class="slds-checkbox--faux"></span>
                                                    <span class="slds-form-element__label">{!opt.label}</span>
                                                </label>
                                            </span>
                                        </apex:repeat>
                                    </div>
                                </fieldset>
                            </div>
                            
                            <footer class="slds-card__footer">
                                <div class="slds-no-flex slds-float_left">
                                    <apex:commandButton action="{!linkToBranch}" styleClass="slds-button slds-button_neutral" title="Link to Branch" value="Link to Branch" reRender="main" status="renderLightningSpinner"/>
                                    
                                </div>
                                <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Account Name">Selected</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Account Name">Issue Key</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Opportunity Name">Priority</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Account Name">Status</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Account Name">Assignee</div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Account Name">Summary</div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <apex:repeat value="{!issues}" var="issue">
                                            <tr class="slds-hint-parent">
                                                
                                                <td >
                                                    <div class="slds-truncate" >
                                                        <apex:inputCheckbox value="{!issue.isChecked}"/>
                                                    </div>
                                                </td>
                                                <td >
                                                    <div class="slds-truncate" >
                                                        
                                                        
                                                        <a href="https://grushaisf-dev.atlassian.net/browse/{!issue.issue.key}" target="_blank"> {!issue.issue.key}</a>
                                                        
                                                        
                                                        
                                                    </div>
                                                </td> 
                                                <th  scope="row">
                                                    <div class="slds-truncate" >
                                                        {!issue.issue.fields.priority.name}     
                                                    </div>
                                                </th>
                                                <td >
                                                    <div class="slds-truncate" >
                                                        {!issue.issue.fields.status.name   }   
                                                    </div>
                                                </td>
                                                <td >
                                                    <div class="slds-truncate" >
                                                        {!issue.issue.fields.assignee.displayName}   
                                                    </div>
                                                </td>
                                                
                                                <td >
                                                    <div class="slds-truncate" >
                                                        {!issue.issue.fields.summary}
                                                    </div>
                                                </td>
                                            </tr> 
                                            
                                            
                                        </apex:repeat>
                                        
                                        
                                    </tbody>
                                </table> 
                            </footer>                            
                        </article>
                    </apex:outputPanel>
                </apex:form>
            </div>
            
        </body>
    </html>
    
</apex:page>